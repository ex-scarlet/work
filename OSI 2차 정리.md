# OSI란?

Open Systems Interconnection(개방형 시스템 상호연결)의 약자로, 네트워크에서 통신이 일어나는 과정을 7개의 계층으로 나눈 모델입니다.

### 네트워크

그물을 뜻하는 Net와 Work의 합성어로, 그물처럼 서로 긴밀하게 연결되어 있는 것을 뜻합니다.   
보통 IT에서 사용되는 정의로 보자면, 두 대 이상의 컴퓨터들을 연결하고 서로 통신할 수 있는 것을 말합니다.

OSI 7계층에 대한 공부에 앞서, __네트워크__ 에 대해 짚고 넘어가야 할 필요가 있습니다.

네트워크는 일대일 커뮤니케이션에서 원거리 커뮤니케이션의 필요성으로 발달하게 되었습니다.

기술의 발달로 기존 아날로그 신호가 아닌 전기적 신호를 활용하게 되면서, 마치 여러 대의 기기가 그물망처럼 연결되어 서로 통신  
한다는 뜻의 네트워크 구축을 가속화 시켰습니다.

이때 탄생한 것이 OSI 7계층입니다.

7계층: 응용(Application) 계층  
6계층: 표현(Presentation) 계층  
5계층: 세션(Session) 계층  
4계층: 전송(Transport) 계층  
3계층: 네트워크(Network) 계층  
2계층: 데이터 링크(Data-Link) 계층  
1계층: 물리(Physical) 계층  

서로 이질적인 네트워크 간의 연결에 어려움이 많으므로, 호환성 이슈를 방지하고자 ISO(국제 표준화 기구)에서 OSI 참조 모델을 제시하게 됩니다.

즉, OSI 7계층은 __네트워크를 만들 떄, 이것을 참조해서 만들어주세요~__ 라는 참조 모델이라는 것입니다.
그러므로 OSI 7계층에 대해 이해하게 된다면, 네트워크 구성을 파악하는데 있어 어려움 없이 이해할 수 있습니다.
또한 각 계층은 독립적이나 상하구조 체계이기떄문에 윗계층이 동작하려면 아랫계층도 잘 동작해야 합니다.

# 계층 설명

### 1계층(Physical Layer)
네트워크는 전기적 신호를 이용해 전화나 인터넷을 이용할 수 있습니다. 이 전기적 신호에 대해 다루는 계층이 Physical Layer, 즉 1계층입니다.

ON: 전기가 흐른다(1)
OFF: 전기가 흐르지 않는다(0)

위의 신호로 컴퓨터는 데이터를 정의합니다.

하지만 이런 형태의 전자기파는 항상 무한대의 주파수 범위를 가집니다. 그래서 이런 전기적 신호를 통과시킬 수 있는 전선은 없다고 할 수 있습니다.
따라서 곡선 형태의 아날로그 신호로 변경해주어야 합니다.

그러므로, 최소 두 대의 컴퓨터가 통신하기 위해서는 0과 1이 나열된 전기적 신호를 아날로그 신호로 바꾸어 전선으로 흘려 보내고, 아날로그 신호를  
0과 1의 나열로 해석하는 역할을 하는 것이 Physical Layer(물리 계층)가 하는 역할입니다.

Physical Layer의 타입은 유선으로는 구리, 광섬유 등이 있으며, 무선으로는 공기(마이크로파)도 가능합니다.

1계층의 장비로는 __케이블, 리피터, 허브__ 가 있습니다.

### 2계층(Data-Link Layer)
1계층으로부터 데이터를 전달받은 2계층이 상대방 컴퓨터로 신호를 보내고 있습니다. 따라서 2계층은 직접 연결된 이웃 컴퓨터와의 통신만을 다룹니다.  
이 계층에서 전송되는 데이터 단위는 __프레임__ 이라고 부릅니다.

직접 연결된 컴퓨터와의 통신만을 다루므로, 이웃의 컴퓨터를 넘어가는 통신은 2계층에서 관여하지 않습니다.

데이터 링크 계층은 통신에 오류가 없도록 다양한 역할들을 수행합니다.

__프레이밍__: 1계층을 통해 받은 신호를 조합해 프레임 단위의 데이터 유닛으로 만들어 처리합니다.
__흐름제어__: 데이터를 송/수신 시, 너무 많거나 너무 적은 데이터를 송/수신 하지 않도록 흐름을 제어합니다.
__오류제어__: 프레임 전송 시 발생한 오류를 복원하거나 재전송합니다.
__접근제어__: 매체 상 통신 주체(장치)가 여러 개 존재할 떄, 데이터 전송 여부를 결정합니다.
__동기화__: 프레임 구분자(특별한 bit 패턴)

이처럼 데이터 링크 계층은 단순히 데이터를 마구잡이로 보내지 않고, 안전하게 보내는 역할도 수행합니다.

2계층의 장비로는 __브리지, 스위치__ 등이 있습니다.

### 3계층(Network Layer)
해외에 있는 A가 국내에 있는 B에게 데이터를 보낼 때는 어떻게 해야 하는가?
이 작업에 대해 다루는 것이 3계층입니다.

3계층은 전송할 데이터를 여러개의 경로를 거쳐 목적지에 전송하는 계층입니다.

이 계층에서 전송 단위는 __패킷__ 이라고 부릅니다.
즉, 주소(IP)를 정하고 경로를 선택하고, 패킷을 전달하는 것이 이 계층에서 이루어지고, 이것을 __라우팅__ 이라고 합니다.
라우팅은 네트워크에서 패킷을 보낼 때 목적지까지 갈 수 있는 여러 경로 중 한 경로를 설정해주는 과정입니다.

3계층의 장비로는 __라우터, L3 스위치__ 등이 있습니다.

### 4계층(Transport Layer)
4계층에서는 사용자들이 신뢰성 있는 데이터를 받을 수 있도록 전송속도를 조절하거나, 오류가 발생하면 맞춰주는 역할을 합니다.

대표적으로 __TCP/UDP__ 프로토콜이 있습니다.

TCP 프로토콜은 __신뢰성 있는 통신을 보장__ 합니다. 신뢰성 있는 연결과 전달을 보장하는 만큼 계속 연결을 유지해야 하므로  
지속적인 유지를 하는 만큼의 리소스가 더 들어갑니다.

UDP 프로토콜은 TCP와는 다르게 __빠른 데이터 전송__ 에 초점을 둔 프로토콜입니다. 목적지에 데이터가 제대로 도착했는지는  
상관하지 않습니다. 따라서 신뢰성있는 데이터 전송보다는 스트리밍과 같은 연속적인 특성을 가진 서비스에 UDP프로토콜이 더 적합합니다..

4계층의 장비로는 L4스위치가 있습니다.

### 5계층(Session Layer)

1계층(Physical Layer) ~ 4계층(Transport Layer)의 주된 기능은 __데이터를 전달__ 하는 것입니다.
5계층부터는 데이터를 송수신하는 양쪽 종점 컴퓨터 내의 __프로세스들 간의 통신 프로토콜__ 이라고 할 수 있습니다.

세션(Session) 이란?

1. 네트워크 환경에서 사용자 간 또는 컴퓨터 간의 대화를 위한 논리적 연결
   - 물리적 연결: 케이블을 통해 직접 연결되는 통신
   - 논리적 연결: 믈리적 연결 외에 IP(논리주소), MAC adress(물리주소) 등을 통해 통신합니다.

2. 프로세스들 사이에 통신을 수행하기 위해서 메세지 교환을 통해 서로를 인식 한 이후부터 통신을 마칠 때까지의 기간

세션 계층(Session Layer)에서는 __응용 프로그램 간의 통신__ 을 하기 위한 __세션을 운영체제를 통해 확립, 유지, 중단하는 작업__  
을 수행합니다. 즉, 응용 프로그램들 간의 접속을 설정, 유지하고 끊어질 경우 데이터를 재전송하거나 연결을 복구합니다.

세션 계층에서 중요한 기능은 __동기화__ 가 있습니다. __동기__ 란 통신 양단에서 서로 동의하는 논리적인 공통처리 지점으로써,  
__동기점을 설정__ 하기 위해 사용됩니다.  
동기점이 설정된다는 의미는 그 이전까지의 통신은 서로 완벽하게 처리했다는 것을 뜻합니다.  
이를 통해 송수신 중 오류가 발생하면, 처음부터가 아닌 __동기화 이후부터 다시 재전송__ 합니다.  

예시) 우리는 로그인을 통해 다양한 응용프로그램과 세션을 이루면서 데이터를 주고받습니다. 여러 프로그램에 동시에 로그인 할 수도 있으며  
로그아웃 할 때까지 통신관리 및 동기화가 이루어집니다.

__세션 계층 역할 요약__
  - 사용자 위주의 논리적인 연결 서비스 제공
  - 전송 모드 설정(반이중, 전이중, 단방향, 병렬, 직렬, 동기, 비동기)
  - 대화와 동기를 위한 데이터 교환 관리
  - 토큰(TOKEN: 특정 서비스 요구 권리)

### 6계층(Presentation Layer)

표현 계층(Presentation Layer)은 응용 계층(Application Layer)에서 넘겨받은 데이터를 세션 계층(Session Layer) 이 다룰 수 있는 데이터로 바꾸고,
반대로 세션 계층에서 넘겨받은 데이터를 표현 계층이 이해할 수 있는 형태로 바꾸고 전달합니다.  
또한, 그 데이터를 안전하게 사용하기 위해 __암호화/복호화__ 도 진행합니다. 즉, 사용자들이 상위나 하위계층에서 사용하는 __데이터 표현양식과 무관하게__  
사용할 수 있도록 해주는 환경을 제공합니다.  

예시) EBIDIC으로 인코딩 된 문서 파일을 ASCII로 인코딩 된 파일로 바꿔 주기, 해당 데이터가 TEXT인지 그림인지 GIF인지 JPG인지 구분해주기.

### 7계층(Application Layer)

응용 계층(Application Layer)은 __유저와 가장 가까운 층__ 으로, 응용 프로세스(ex: 크롬이라는 웹 클라이언트에 접속해)와 직접 관계하여  
일반적인 응용 서비스(HTTP 프로토콜 등)을 수행합니다.  

__응용 계층 역할 요약__
전송된 메일, 사진, 동영상 등이 크롬이나 사파리 등의 응용프로그램을 통해 사용자가 눈으로 확인할 수 있는 과정이며, 이 데이터들은 해당되는  
프로토콜(HTTP, FTP, SMTP 등)에 의해 처리됩니다.

예시) 
  - HTTP라는 응용계층의 프로토콜은 응용 프로그램인 웹이나 브라우저에 필요한 데이터를 송수신 할 때 사용합니다.
  - FTP는 파일 전송 프로토콜로 서버와 클라이언트 사이의 파일을 주고 받을 때 사용합니다.

### 데이터 캡슐화/역캡슐화(Encapsulation/Decapsulation)
__데이터를 보낼 때__ 는 7계층에서 1계층으로 갑니다. 이 과정에서 캡슐화가 진행되는데, 각 계층은 다른 계층과 통신할 때 데이터에 특정 정보가 들어있는  
Header과 Footer를 추가한 후 다른 계층으로 전달합니다.

PDU(Protocol Data Unit)은 프로토콜 데이터 단위이며 OSI 모델의 정보 처리 단위입니다. (데이터 링크 계층의 데이터 PDU는 프레임입니다.)
아래 계층으로 내려갈수록 PDU에는 다양한 프로토콜에 의해 Header과 Footer가 더해집니다.   
반대로 데이터를 받은 컴퓨터가 PDU로부터 프로토콜의 Header과 Footer를 분석하며 올라가 마지막 응용 계층에 도달하면 원본 데이터만 남습니다(역캡슐화).



