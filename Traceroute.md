Tracert, Traceroute란?
======================

Tracert 또는 Traceroute는 네트워크 연결 상태를 구체적으로 파악하는 데 사용되는 진단 도구입니다. ping이 단순히 목적지 IP 주소의 통신 가능 여부를 확인하는 수준이라면,  
Traceroute는 패킷이 출발지에서 목적지까지 이동하는 길목 하나하나를 확인할 수 있습니다.

### Tracert / Traceroute
Tracert와 Traceroute는 같은 기능을 한다고 생각하시면 됩니다. 윈도우에서는 CMD를 통하여 Tracert로, 리눅스와 맥에서는 터미널을 통하여 Traceroute로 사용합니다.  

Traceroute는 ping과 마찬가지로 목적지에 ICMP(Internet Control Message Protocol) 패킷을 보내는 방식으로 작동합니다. 패킷은 출발지에서 목적지로 한 번에 이동하지  
않습니다. 복수의 경로를 거치게 됩니다. 이 때 각 구간을 홉(hop)이라고 부릅니다.

### 네트워크 패킷(packet)이란?

패킷이 지나는 홉마다의 IP주소와 구간 별 패킷이 이동하는 시간을 체크할 수 있습니다. Traceroute를 사용하는 목적은 아래와 같이 정리할 수 있습니다.  

1. 패킷이 목적지로 향하는 전체 경로를 파악할 수 있습니다.
2. 경로에 존재하는 라우터의 정보를 확인할 수 있습니다.
3. 각 경로에 도착하는 데 걸리는 시간을 확인할 수 있습니다.

결론적으로 통신에 문제가 있을 때 구체적으로 어디에서 패킷이 막히는 건지, 속도가 지연되는 건지를 확인할 수 있습니다.

TTL
===

홉의 개념을 알았으니 TTL도 알아야 합니다. 패킷의 헤더 정보에는 TTL(Time To Live)이라는 필드가 존재합니다. TTL은 패킷이 폐기되기 전 최대 몇 개의 홉을 이동할 수 있는지  
명시한 정보입니다. Traceroute는 TTL을 기준으로 출발지와 목적지 사이의 거리를 측정하고 그 사이의 홉을 찾아냅니다.
예를 들면, 로컬호스트(127.0.0.1)에서 google.com 까지 패킷을 보내려면 30개의 홉이 필요한데, 패킷의 TTL이 20이면 google.com까지 도달하지 못하게 됩니다.  
"이런 제한이 필요한가?" 싶지만 제한이 전혀 없다면 목적지를 찾아가지 못하는 패킷도 무한히 라우터를 돌아다니는 문제가 발생할 수 있기 때문에 TTL이 필요합니다.

Tracert 사용 방법(Windows)
===========================

기본 사용 방법은 아래와 같습니다.

Tracert [ip주소 또는 도메인]
ex) tracert google.com

![image](https://github.com/ex-scarlet/work/assets/58895345/8c759ceb-e6ef-482c-b8c6-406db7a5d35c)

위 예시에선 홉 수를 13으로 제한(-h 13)하는 옵션을 걸었고, 필요한 홉 수가 모자라 목적지까지 도달하지 못하는 모습입니다.

추적을 시작하면 1, 2, 3 --- 처럼 순서대로 패킷이 이동한 홉 수를 표현합니다. 중간에 miliseconds(ms) 단위가 3개 나오는 건 ICMP 패킷을 세 번 보낸 결과입니다.  
마지막 열은 IP 주소 또는 도메인입니다. 첫 줄에는 패킷이 다른 네트워크로 나가는 출구인 게이트웨이의 IP주소가 표기됩니다.  
그 다음부터는 거쳐가는 라우터들의 IP라고 보면 될 것 같습니다. 도착지에 도달할 때 쯤엔 도착지 네트워크의 게이트웨이를 거칠 것 입니다.

Traceroute 사용 방법(Linux)
=========================== 

traceroute [ip 주소 또는 도메인]
ex) traceroute google.com


